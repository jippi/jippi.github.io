<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Configuration - jippi/cakephp-crud</title>

    <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    <meta http-equiv="refresh" content="5; url=http://friendsofcake.com/crud//docs/configuration.html">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="http://cakephp.nu/cakephp-crud/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }

      @media (max-width: 980px) {
        /* Enable use of floated navbar text */
        .navbar-text.pull-right {
          float: none;
          padding-left: 5px;
          padding-right: 5px;
        }
      }
    </style>

    <link href="http://cakephp.nu/cakephp-crud/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="http://cakephp.nu/cakephp-crud/css/highlight.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://cakephp.nu/cakephp-crud/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
  	<div class="alert alert-block">
		  <h4>NOTICE!</h4>
  		This is an archived copy of CRUD, development continues at <a href="http://friendsofcake.com/">Friends Of Cake</a>.<br />
  		<br />
  		Please go to <a href="http://friendsofcake.com/crud">the new website</a> for up to date documentation<br />
  		<br />
  		You will automatically be redirected in 5 seconds
		</div>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="http://cakephp.nu/cakephp-crud/">jippi/cakephp-crud</a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-right">

            </p>
            <ul class="nav">
              <li class="active"><a href="http://cakephp.nu/cakephp-crud/">Home</a></li>
              <li><a href="http://cakephp.nu/cakephp-crud/docs/">Documentation</a></li>
              <li><a href="http://cakephp.nu/cakephp-crud/examples/">Examples</a></li>
              <li><a href="http://cakephp.nu/cakephp-crud/docs/views/wish-list.html">View</a></li>
              <li><a href="http://cakephp.nu/cakephp-crud/docs/todo.html">TODO</a></li>
              <li><a href="http://cakephp.nu/cakephp-crud/api/develop">API documentation</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="well sidebar-nav">
            <ul class="nav nav-list">
              <li class="nav-header">Getting started</li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/">Introduction</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/installation.html">Installation</a></li>
              <li class="active"><a href="http://cakephp.nu/cakephp-crud/docs/configuration.html">Configuration</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/conventions.html">Conventions</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/events.html">Events</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/unit-testing.html">Unit Testing</a></li>
              <li class="nav-header">Actions</li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/actions/index.html">Index</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/actions/add.html">Add</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/actions/edit.html">Edit</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/actions/view.html">View</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/actions/delete.html">Delete</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/actions/custom.html">Custom</a></li>
              <li class="nav-header">Listeners</li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/intro.html">Introduction</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/debug-kit.html">Debug Kit</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/related-models.html">Related Models</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/scaffold.html">Scaffold</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/custom.html">Custom listeners</a></li>
              <li class="nav-header">API listeners</li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/api.html">Api</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/api-field-filter.html">Api Field Filter</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/api-pagination.html">Api Pagination</a></li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/docs/listeners/api-query-log.html">Api Query Log</a></li>
              <li class="nav-header">Examples</li>
              <li class=""><a href="http://cakephp.nu/cakephp-crud/examples/blog.html">Blog tutorial</a></li>
            </ul>
          </div><!--/.well -->
        </div>
        <div class="span9">
          <div class="toc hide">...toc....</div>
          <h1 id='configuration'>Configuration</h1>

<p>We only use routes without prefix in these examples, but the Crud component works with <strong>any</strong> prefixes you may have. It just requires some additional configuration.</p>

<p>In the code example below, we pass in an actions array with all the controller actions we wish the Crud component to handle - you can omit some of the actions if you wish.</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>class</span> <span class='nc'>AppController</span> <span class='k'>extends</span> <span class='nx'>Controller</span> <span class='p'>{</span>

  <span class='k'>public</span> <span class='nv'>$components</span> <span class='o'>=</span> <span class='p'>[</span>
    <span class='c1'>// Enable CRUD actions</span>
    <span class='s1'>&#39;Crud.Crud&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
       <span class='c1'>// All actions but delete() will be implemented</span>
      <span class='s1'>&#39;actions&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
        <span class='c1'>// The controller action &#39;index&#39; will map to the IndexCrudAction</span>
        <span class='s1'>&#39;index&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;Crud.Index&#39;</span><span class='p'>,</span>
        <span class='c1'>// The controller action &#39;add&#39; will map to the AddCrudAction</span>
        <span class='s1'>&#39;add&#39;</span>   <span class='o'>=&gt;</span> <span class='s1'>&#39;Crud.Add&#39;</span><span class='p'>,</span>
        <span class='c1'>// The controller action &#39;edit&#39; will map to the EditCrudAction</span>
        <span class='s1'>&#39;edit&#39;</span>  <span class='o'>=&gt;</span> <span class='s1'>&#39;Crud.edit&#39;</span><span class='p'>,</span>
        <span class='c1'>// The controller action &#39;view&#39; will map to the ViewCrudAction</span>
        <span class='s1'>&#39;view&#39;</span>  <span class='o'>=&gt;</span> <span class='s1'>&#39;Crud.View&#39;</span>
      <span class='p'>]</span>
    <span class='p'>]</span>
  <span class='p'>];</span>

<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<p>If you wish to modify the default settings, simply pass in an array as <code>value</code> for each action array key</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>class</span> <span class='nc'>AppController</span> <span class='k'>extends</span> <span class='nx'>Controller</span> <span class='p'>{</span>

  <span class='k'>public</span> <span class='nv'>$components</span> <span class='o'>=</span> <span class='p'>[</span>
    <span class='c1'>// Enable CRUD actions</span>
    <span class='s1'>&#39;Crud.Crud&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
       <span class='c1'>// All actions but delete() will be implemented</span>
      <span class='s1'>&#39;actions&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
        <span class='c1'>// The controller action &#39;index&#39; will still map to the IndexCrudAction</span>
        <span class='s1'>&#39;index&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span><span class='s1'>&#39;viewVar&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;items&#39;</span><span class='p'>]</span>
        <span class='c1'>// The controller action &#39;add&#39; will map to the MyPlugin.Controller/Crud/Action/MyIndexCrudAction</span>
        <span class='s1'>&#39;add&#39;</span>   <span class='o'>=&gt;</span> <span class='p'>[</span><span class='s1'>&#39;className&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;MyPlugin.MyIndex&#39;</span><span class='p'>]</span>
        <span class='c1'>// The controller action &#39;edit&#39; will map to the EditCrudAction</span>
        <span class='s1'>&#39;edit&#39;</span>  <span class='o'>=&gt;</span> <span class='s1'>&#39;Crud.edit&#39;</span><span class='p'>,</span>
        <span class='c1'>// The controller action &#39;view&#39; will map to the ViewCrudAction</span>
        <span class='s1'>&#39;view&#39;</span>  <span class='o'>=&gt;</span> <span class='s1'>&#39;Crud.View&#39;</span>
      <span class='p'>]</span>
    <span class='p'>]</span>
  <span class='p'>];</span>

<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<p>In the above example, if the <code>delete</code> action is called on <strong>any</strong> controller (that doesn&#8217;t implement it on their own), cake will raise it&#8217;s normal <code>MissingActionException</code> error</p>

<p>You can enable and disable Crud actions on the fly</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='sd'>/**</span>
<span class='sd'> * Application wide controller</span>
<span class='sd'> *</span>
<span class='sd'> * @abstract</span>
<span class='sd'> * @package App.Controller</span>
<span class='sd'> */</span>
<span class='k'>abstract</span> <span class='k'>class</span> <span class='nc'>AppController</span> <span class='k'>extends</span> <span class='nx'>Controller</span> <span class='p'>{</span>
<span class='sd'>/**</span>
<span class='sd'> * List of global controller components</span>
<span class='sd'> *</span>
<span class='sd'> * @var array</span>
<span class='sd'> */</span>
  <span class='k'>public</span> <span class='nv'>$components</span> <span class='o'>=</span> <span class='p'>[</span>
    <span class='c1'>// Enable CRUD actions</span>
    <span class='s1'>&#39;Crud.Crud&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
      <span class='s1'>&#39;actions&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
        <span class='c1'>// Same as array(&#39;index&#39; =&gt; &#39;Crud.Index&#39;)</span>
        <span class='s1'>&#39;index&#39;</span><span class='p'>,</span>
        <span class='c1'>// Same as array(&#39;add&#39; =&gt; &#39;Crud.Add&#39;)</span>
        <span class='s1'>&#39;add&#39;</span><span class='p'>,</span>
        <span class='c1'>// Same as array(&#39;edit&#39; =&gt; &#39;Crud.Edit&#39;)</span>
        <span class='s1'>&#39;edit&#39;</span><span class='p'>,</span>
        <span class='c1'>// Same as array(&#39;view&#39; =&gt; &#39;Crud.View&#39;)</span>
        <span class='s1'>&#39;view&#39;</span><span class='p'>,</span>
        <span class='c1'>// Same as array(&#39;delete&#39; =&gt; &#39;Crud.Delete&#39;)</span>
        <span class='s1'>&#39;delete&#39;</span>
      <span class='p'>]</span>
    <span class='p'>]</span>
  <span class='p'>];</span>

  <span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='c1'>// Will ignore delete action</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>disable</span><span class='p'>(</span><span class='s1'>&#39;delete&#39;</span><span class='p'>);</span>

    <span class='c1'>// Will process delete action again</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>enable</span><span class='p'>(</span><span class='s1'>&#39;delete&#39;</span><span class='p'>);</span>

    <span class='k'>parent</span><span class='o'>::</span><span class='na'>beforeFilter</span><span class='p'>();</span>
  <span class='p'>}</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<p>You can also change the default view used for a Crud action</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>class</span> <span class='nc'>DemoController</span> <span class='k'>extends</span> <span class='nx'>AppController</span> <span class='p'>{</span>
  <span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='c1'>// Change the view for add crud action to be &quot;public_add.ctp&quot;</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;add&#39;</span><span class='p'>,</span>  <span class='s1'>&#39;public_add&#39;</span><span class='p'>);</span>
    <span class='c1'>// Same as</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;add&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;public_add&#39;</span><span class='p'>);</span>

    <span class='c1'>// Change the view for edit crud action to be &quot;public_edit.ctp&quot;</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;edit&#39;</span><span class='p'>,</span> <span class='s1'>&#39;public_edit&#39;</span><span class='p'>);</span>
    <span class='c1'>// Same as</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;edit&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;public_edit&#39;</span><span class='p'>);</span>

    <span class='c1'>// Convenient shortcut to change both at once</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='k'>array</span><span class='p'>(</span><span class='s1'>&#39;add&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;public_add&#39;</span><span class='p'>,</span> <span class='s1'>&#39;edit&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;public_edit&#39;</span><span class='p'>));</span>
    <span class='c1'>// Same as</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;add&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;public_add&#39;</span><span class='p'>);</span>
    <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;edit&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;public_edit&#39;</span><span class='p'>);</span>

    <span class='k'>parent</span><span class='o'>::</span><span class='na'>beforeFilter</span><span class='p'>();</span>
  <span class='p'>}</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='change_the_find_method'>Change the find() method</h1>

<p>Changing the <code>find type</code> allows you to use <a href='http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types'>custom find methods</a> inside a <code>CrudAction</code></p>

<p>By providing your own custom find method, you can easily inject more complex <code>find</code> logic and at the same time follow the <a href='http://www.mikebernat.com/images/cake/layercake.png'>skinny controllers, fat models</a> code guideline.</p>

<p>Adding custom data to your custom find is also possible, and very simple, have a look at the <code>events</code> documentation.</p>

<p>By default <code>index</code> uses <code>find(&#39;all&#39;)</code></p>

<p>By default <code>view</code> uses <code>find(&#39;first&#39;)</code></p>

<p>By default <code>add</code> uses <code>find(&#39;first&#39;)</code></p>

<p>By default <code>edit</code> uses <code>find(&#39;first&#39;)</code></p>

<p>By default <code>delete</code> uses <code>find(&#39;count&#39;)</code></p>

<h2 id='using_beforefilter'>Using beforeFilter</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='c1'>// The index() function will call find(&#39;published&#39;) on your model</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>(</span><span class='s1'>&#39;published&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>();</span>

  <span class='c1'>// The admin_index() function will call find(&#39;unpublished&#39;) on your model</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>(</span><span class='s1'>&#39;unpublished&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h2 id='in_the_controller_action'>In the controller action</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// You don&#39;t have to provide the action name in &#39;action&#39;</span>
<span class='c1'>// since the default is the current action</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>index</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>(</span><span class='s1'>&#39;published&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>();</span>

  <span class='k'>return</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>executeAction</span><span class='p'>();</span>
<span class='p'>}</span>

<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>admin_index</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>(</span><span class='s1'>&#39;unpublished&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>findMethod</span><span class='p'>();</span>

  <span class='k'>return</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>executeAction</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='change_the_view_to_be_rendered'>Change the view to be rendered</h1>

<p>By default Crud renders a view with the same name as the controller action, but there are cases where you want to change this.</p>

<p>If you action is <code>admin_index</code> the <code>admin_index.ctp</code> view will be rendered by default.</p>

<h2 id='using_beforefilter'>Using beforeFilter</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='c1'>// Change the &#39;index&#39; view  to &#39;my_index&#39;</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;my_index&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>();</span>

  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;my_admin_index&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h2 id='in_the_controller_action'>In the controller action</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// You don&#39;t have to provide the action name in &#39;action&#39;</span>
<span class='c1'>// since the default is the current action</span>

<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>index</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;my_index&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>();</span>

  <span class='k'>return</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>executeAction</span><span class='p'>();</span>
<span class='p'>}</span>

<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>admin_index</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>(</span><span class='s1'>&#39;my_admin_index&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>view</span><span class='p'>();</span>

  <span class='k'>return</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>executeAction</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='change_the_viewvar_variable_name_in_the_view'>Change the viewVar (variable name in the view)</h1>

<p>By default Crud follows the convention of <code>$items</code> in <code>index()</code> actions and <code>$item</code> in <code>view()</code> actions</p>

<p>If you want to change these settings, simply call the <code>viewVar()</code> method on the action</p>

<h2 id='using_beforefilter'>Using beforeFilter</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>(</span><span class='s1'>&#39;data&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>();</span>

  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>(</span><span class='s1'>&#39;data&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_index&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h2 id='in_the_controller_action'>In the controller action</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// You don&#39;t have to provide the action name in &#39;action&#39;</span>
<span class='c1'>// since the default is the current action</span>

<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>index</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>(</span><span class='s1'>&#39;data&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>();</span>

  <span class='k'>return</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>executeAction</span><span class='p'>();</span>
<span class='p'>}</span>

<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>admin_index</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>(</span><span class='s1'>&#39;data&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>()</span><span class='o'>-&gt;</span><span class='na'>viewVar</span><span class='p'>();</span>

  <span class='k'>return</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>executeAction</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='enable_a_crud_action_on_the_fly'>Enable a Crud action on the fly</h1>

<p>This can only be done in <code>beforeFilter</code> (or earlier in the request) since it&#8217;s the last method called before the actual controller action is executed.</p>

<p>Enabling a <code>CrudAction</code> automatically injects it into the Controller as if it was defined in the <code>actions</code> array in the crud component configuration.</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// This can only be done in the beforeFilter</span>

<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;delete&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>enable</span><span class='p'>();</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_delete&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>enable</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='disable_a_crud_action_on_the_fly'>Disable a Crud action on the fly</h1>

<p>This can only be done in <code>beforeFilter</code> (or earlier in the request) since it&#8217;s the last method called before the actual controller action is executed.</p>

<p>Disabling a <code>CrudAction</code> automatically removes it from the Controller as if it was never defined in the <code>actions</code> array in the crud component configuration.</p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// This can only be done in the beforeFilter</span>

<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;delete&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>disable</span><span class='p'>();</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;admin_delete&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>disable</span><span class='p'>();</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='change_crudaction_configuration_settings_on_the_fly'>Change CrudAction configuration settings on the fly</h1>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// This can be done both in beforeFilter and the controller action</span>
<span class='c1'>// All possible config keys can be found in the CrudAction classes (app/Plugin/Crud/Controller/Crud/Action)</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;view&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>config</span><span class='p'>(</span><span class='s1'>&#39;validateId&#39;</span><span class='p'>,</span> <span class='s1'>&#39;uuid&#39;</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;view&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>config</span><span class='p'>(</span><span class='s1'>&#39;validateId&#39;</span><span class='p'>);</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='disable_securedelete_for_delete_actions'>Disable secureDelete for delete() actions</h1>

<p><code>secureDelete</code> enforces that a <code>HTTP DELETE</code> request must be used for any <code>delete()</code> actions.</p>

<p>If set to <code>true</code> only <code>HTTP DELETE</code> is considered valid for <code>delete()</code> actions.</p>

<p>If set to <code>false</code> both <code>HTTP DELETE</code> and <code>HTTP POST</code> is considered valid for <code>delete()</code> actions.</p>

<p>The default setting is <code>true</code></p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// Disabling this feature allow HTTP POST to execute delete() actions</span>
<span class='c1'>// This can be changed in both beforeFilter and the controller action</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;delete&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>config</span><span class='p'>(</span><span class='s1'>&#39;secureDelete&#39;</span><span class='p'>,</span> <span class='k'>false</span><span class='p'>);</span>

  <span class='c1'>// Get the current configuration</span>
  <span class='nv'>$config</span> <span class='o'>=</span> <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;delete&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>config</span><span class='p'>(</span><span class='s1'>&#39;secureDelete&#39;</span><span class='p'>);</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='configure_related_model_data_for_add__edit_views'>Configure related model data for add / edit views</h1>

<p>Please see the <a href='http://cakephp.nu/cakephp-crud/docs/listeners/related-models.html'>related models documentation</a></p>

<h1 id='change_save_options'>Change save options</h1>

<p>All options as described in <a href='http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array'>CakePHP documentation on saveAll()</a> is valid here.</p>

<p>This configuration maps directly to the 2nd parameter of <code>saveAll()</code> called <code>$options</code></p>

<p>The default for <code>add</code> and <code>edit</code> is <code>array(&#39;validate&#39; =&gt; &#39;first&#39;, &#39;atomic&#39; =&gt; true)</code></p>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// This can be changed in beforeFilter and in a controller action</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='c1'>// saveOptions is the 2nd argument to saveAll()</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>action</span><span class='p'>(</span><span class='s1'>&#39;add&#39;</span><span class='p'>)</span><span class='o'>-&gt;</span><span class='na'>saveOptions</span><span class='p'>(</span><span class='k'>array</span><span class='p'>(</span><span class='s1'>&#39;atomic&#39;</span> <span class='o'>=&gt;</span> <span class='k'>false</span><span class='p'>));</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h1 id='change_the_crud_action_class'>Change the crud action class</h1>

<p>Please remember that the CrudAction class names <code>index</code>, <code>view</code>, <code>add</code>, <code>edit</code> and <code>delete</code> is reserved, and can only be used inside the Crud plugin.</p>

<p>You own CrudActions can be called anything but these class names</p>

<p>Please see the <a href='http://cakephp.nu/cakephp-crud/docs/actions/custom.html'>custom crud action documentation</a> for more information</p>

<h2 id='through_component_configuration'>Through component configuration</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='k'>class</span> <span class='nc'>AppController</span> <span class='k'>extends</span> <span class='nx'>Controller</span> <span class='p'>{</span>

  <span class='k'>public</span> <span class='nv'>$components</span> <span class='o'>=</span> <span class='p'>[</span>
    <span class='c1'>// Enable CRUD actions</span>
    <span class='s1'>&#39;Crud.Crud&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
       <span class='c1'>// All actions but delete() will be implemented</span>
      <span class='s1'>&#39;actions&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span>
        <span class='c1'>// The controller action &#39;add&#39; will map to the MyPlugin.Controller/Crud/Action/MyIndexCrudAction</span>
        <span class='s1'>&#39;index&#39;</span> <span class='o'>=&gt;</span> <span class='p'>[</span><span class='s1'>&#39;className&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;MyPlugin.MyIndex&#39;</span><span class='p'>]</span>
        <span class='c1'>// The controller action &#39;add&#39; will map to the MyPlugin.Controller/Crud/Action/MyAddCrudAction</span>
        <span class='s1'>&#39;add&#39;</span>   <span class='o'>=&gt;</span> <span class='p'>[</span><span class='s1'>&#39;className&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;MyPlugin.MyAdd&#39;</span><span class='p'>]</span>
        <span class='c1'>// The controller action &#39;edit&#39; will map to the MyPlugin.Controller/Crud/Action/MyEditCrudAction</span>
        <span class='s1'>&#39;edit&#39;</span>  <span class='o'>=&gt;</span> <span class='p'>[</span><span class='s1'>&#39;className&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;MyPlugin.MyEdit&#39;</span><span class='p'>]</span>
        <span class='c1'>// The controller action &#39;view&#39; will map to the MyPlugin.Controller/Crud/Action/MyViewCrudAction</span>
        <span class='s1'>&#39;view&#39;</span>  <span class='o'>=&gt;</span> <span class='p'>[</span><span class='s1'>&#39;className&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;MyPlugin.MyView&#39;</span><span class='p'>]</span>
      <span class='p'>]</span>
    <span class='p'>]</span>
  <span class='p'>];</span>

<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>
<h2 id='on_the_fly'>On The fly</h2>
<div class='highlight'><pre><code class='php'><span class='cp'>&lt;?php</span>
<span class='c1'>// This can be changed in beforeFilter and in a controller action</span>
<span class='k'>public</span> <span class='k'>function</span> <span class='nf'>beforeFilter</span><span class='p'>()</span> <span class='p'>{</span>
  <span class='c1'>// saveOptions is the 2nd argument to saveAll()</span>
  <span class='nv'>$this</span><span class='o'>-&gt;</span><span class='na'>Crud</span><span class='o'>-&gt;</span><span class='na'>defaults</span><span class='p'>(</span><span class='s1'>&#39;action&#39;</span><span class='p'>,</span> <span class='s1'>&#39;index&#39;</span><span class='p'>,</span> <span class='p'>[</span><span class='s1'>&#39;className&#39;</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;MyPlugin.MyAction&#39;</span><span class='p'>]);</span>
<span class='p'>}</span>
<span class='cp'>?&gt;</span><span class='x' />
</code></pre></div>

					<br />
<hr />
<br />

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'cakephpnu';
    var disqus_url = 'http://cakephp.nu/cakephp-crud/docs/configuration.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        </div>
      </div><!--/row-->

      <hr />

      <footer>
        <p>&copy; Christian Winther 2013</p>
      </footer>

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="http://cakephp.nu/cakephp-crud/js/toc.js"></script>
		<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42609077-1', 'cakephp.nu');
  ga('send', 'pageview');

</script>

  </body>
</html>
